\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{nicetikz}[2021/09/08 TikZ-based environments]

\RequirePackage{tikz}
\RequirePackage{tikz-cd}

\usetikzlibrary{arrows}
\usetikzlibrary{babel}			% Prevents clashes with Spanish babel package
\usetikzlibrary{calc}			% Functions in the coordinates
\usetikzlibrary{patterns}
\usetikzlibrary{positioning}

\@ifclassloaded{beamer}{%
	\PackageWarning{nicetikz}{%
		Beamer CLASS detected!\MessageBreak
		Remember to use an ampersand replacement\MessageBreak
		to avoid conflicts in the following packages:\MessageBreak
		- diagram\MessageBreak
		- function\MessageBreak%
	}
}

\newenvironment{diagram}%
	{%
		\begin{equation}%
		\begin{tikzcd}%
	}%
	{%
		\end{tikzcd}%
		\end{equation}%
	}

\newenvironment{diagram*}%
	{%
		\begin{equation*}%
		\begin{tikzcd}%
	}%
	{%
		\end{tikzcd}%
		\end{equation*}%
	}

% Row separation is set to -1mm by default, in an attempt to mimic the way
% display style functions are written.
% Separation can be set manually (requires units).

\newenvironment{funcion}[1][-1mm]{%
	\begin{equation}%
	\begin{tikzcd}[row sep=#1]%
}%
{%
	\end{tikzcd}%
	\end{equation}%
}

\newenvironment{funcion*}[1][-1mm]{%
	\begin{equation*}%
	\begin{tikzcd}[row sep=#1]%
}%
{%
	\end{tikzcd}%
	\end{equation*}%
}
